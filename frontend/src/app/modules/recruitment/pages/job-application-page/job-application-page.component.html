<div class="form-container">
  <h2 class="form-title">Submit Your Resume</h2>
  <form #uploadForm="ngForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="resume" class="form-label"
        >Upload Resume (PDF only, max 10MB) *</label
      >
      <div
        class="upload-area"
        [ngClass]="{ 'drag-over': isDragging }"
        (dragover)="onDragOver($event)"
        (dragenter)="onDragEnter($event)"
        (dragleave)="onDragLeave($event)"
        (drop)="onDrop($event)"
        (click)="triggerFileInput()"
        role="region"
        aria-label="Drag and drop PDF file here or click to select"
      >
        <i class="upload-area-icon fa-solid fa-cloud-upload-alt"></i>
        <p class="upload-area-text">Drag and drop your PDF resume here</p>
        <p class="upload-area-subtext">or click to browse (max 10MB)</p>
      </div>
      <input
        type="file"
        id="resume"
        name="resume"
        class="upload-input"
        accept="application/pdf"
        #resumeInput
        (change)="onFileSelect($event)"
        aria-describedby="resume-error-type resume-error-size"
      />
      <div
        class="form-error"
        id="resume-error-type"
        *ngIf="(isSubmitted || fileTouched) && fileError === 'type'"
      >
        Only PDF files are allowed
      </div>
      <div
        class="form-error"
        id="resume-error-size"
        *ngIf="(isSubmitted || fileTouched) && fileError === 'size'"
      >
        File size must not exceed 10MB
      </div>
      <div class="file-selected" *ngIf="selectedFile && !fileError">
        <i class="file-selected-icon fa-solid fa-check-circle"></i>
        File selected: {{ selectedFile.name }} ({{
          formatFileSize(selectedFile.size)
        }})
      </div>
    </div>
    <div class="upload-form-actions">
      @if(!isLoading){
      <button type="button" class="form-btn cancel" (click)="onCancel()">
        <i class="form-btn-icon fa-solid fa-times"></i> Cancel
      </button>
      }

      <button
        type="submit"
        class="form-btn save"
        [disabled]="!selectedFile || fileError"
      >
        @if(isLoading){
        <span class="loader" aria-label="Loading"></span>

        }@else{
        <i class="form-btn-icon fa-solid fa-upload"></i> Submit }
      </button>
    </div>
  </form>
</div>
