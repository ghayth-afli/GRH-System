<div class="form-container">
  <h2 class="form-title">
    {{ isEditMode ? "Update Job Offer" : "Create Job Offer" }}
  </h2>
  <form #jobOfferForm="ngForm" (ngSubmit)="onSubmit()" novalidate>
    <div class="form-group">
      <label for="title" class="form-label">Job Title *</label>
      <input
        type="text"
        id="title"
        name="title"
        class="form-input"
        [(ngModel)]="jobOffer.title"
        #title="ngModel"
        required
        maxlength="200"
        placeholder="e.g., Senior Java Developer"
        [attr.aria-describedby]="'title-error-required title-error-maxlength'"
      />
      @if ((title.touched || submitted) && title.errors?.['required']) {
      <div class="form-error" id="title-error-required">
        Job Title is required
      </div>
      } @if ((title.touched || submitted) && title.errors?.['maxlength']) {
      <div class="form-error" id="title-error-maxlength">
        Job Title cannot exceed 200 characters
      </div>
      }
    </div>

    <div class="form-group">
      <label for="description" class="form-label">Description *</label>
      <textarea
        id="description"
        name="description"
        class="form-textarea"
        [(ngModel)]="jobOffer.description"
        #description="ngModel"
        required
        maxlength="2000"
        placeholder="e.g., We are looking for an experienced Java developer..."
        [attr.aria-describedby]="
          'description-error-required description-error-maxlength'
        "
      ></textarea>
      @if ((description.touched || submitted) &&
      description.errors?.['required']) {
      <div class="form-error" id="description-error-required">
        Description is required
      </div>
      } @if ((description.touched || submitted) &&
      description.errors?.['maxlength']) {
      <div class="form-error" id="description-error-maxlength">
        Description cannot exceed 2000 characters
      </div>
      }
    </div>

    <div class="form-group">
      <label for="department" class="form-label">Department *</label>
      <select
        id="department"
        name="department"
        class="form-select"
        [(ngModel)]="jobOffer.department"
        #department="ngModel"
        required
        aria-describedby="department-error-required"
      >
        <option value="" disabled>Select a department</option>
        <option value="support services">Support Services</option>
        <option value="research & development">Research & Development</option>
        <option value="human resources">Human Resources</option>
        <option value="supply chain">Supply Chain</option>
        <option value="it">IT</option>
        <option value="commercial">Commercial</option>
      </select>
      @if ((department.touched || submitted) && department.errors?.['required'])
      {
      <div class="form-error" id="department-error-required">
        Department is required
      </div>
      }
    </div>

    <div class="form-group">
      <label for="responsibilities" class="form-label"
        >Responsibilities *</label
      >
      <textarea
        id="responsibilities"
        name="responsibilities"
        class="form-textarea"
        [(ngModel)]="jobOffer.responsibilities"
        #responsibilities="ngModel"
        required
        maxlength="2000"
        placeholder="e.g., Design, implement, and maintain Java-based applications..."
        [attr.aria-describedby]="
          'responsibilities-error-required responsibilities-error-maxlength'
        "
      ></textarea>
      @if ((responsibilities.touched || submitted) &&
      responsibilities.errors?.['required']) {
      <div class="form-error" id="responsibilities-error-required">
        Responsibilities are required
      </div>
      } @if ((responsibilities.touched || submitted) &&
      responsibilities.errors?.['maxlength']) {
      <div class="form-error" id="responsibilities-error-maxlength">
        Responsibilities cannot exceed 2000 characters
      </div>
      }
    </div>

    <div class="form-group">
      <label for="qualifications" class="form-label">Qualifications *</label>
      <textarea
        id="qualifications"
        name="qualifications"
        class="form-textarea"
        [(ngModel)]="jobOffer.qualifications"
        #qualifications="ngModel"
        required
        maxlength="2000"
        placeholder="e.g., Bachelor's degree in Computer Science or related field..."
        [attr.aria-describedby]="
          'qualifications-error-required qualifications-error-maxlength'
        "
      ></textarea>
      @if ((qualifications.touched || submitted) &&
      qualifications.errors?.['required']) {
      <div class="form-error" id="qualifications-error-required">
        Qualifications are required
      </div>
      } @if ((qualifications.touched || submitted) &&
      qualifications.errors?.['maxlength']) {
      <div class="form-error" id="qualifications-error-maxlength">
        Qualifications cannot exceed 2000 characters
      </div>
      }
    </div>

    <div class="form-group">
      <label for="role" class="form-label">Role *</label>
      <input
        type="text"
        id="role"
        name="role"
        class="form-input"
        [(ngModel)]="jobOffer.role"
        #role="ngModel"
        required
        maxlength="100"
        placeholder="e.g., Backend Developer"
        [attr.aria-describedby]="'role-error-required role-error-maxlength'"
      />
      @if ((role.touched || submitted) && role.errors?.['required']) {
      <div class="form-error" id="role-error-required">Role is required</div>
      } @if ((role.touched || submitted) && role.errors?.['maxlength']) {
      <div class="form-error" id="role-error-maxlength">
        Role cannot exceed 100 characters
      </div>
      }
    </div>

    <div class="form-group">
      <div class="form-checkbox">
        <input
          type="checkbox"
          id="isInternal"
          name="isInternal"
          class="form-checkbox-input"
          [(ngModel)]="jobOffer.isInternal"
        />
        <label for="isInternal" class="form-checkbox-label"
          >Internal Job Offer</label
        >
      </div>
    </div>

    <div class="form-actions">
      <button
        type="button"
        class="form-btn cancel"
        [routerLink]="['/recruitment/job-offers']"
      >
        <i class="form-btn-icon fa-solid fa-times"></i> Cancel
      </button>
      <button
        type="submit"
        class="form-btn save"
        [disabled]="jobOfferForm.invalid"
      >
        <i class="form-btn-icon fa-solid fa-save"></i>
        {{ isEditMode ? "Update" : "Save" }}
      </button>
    </div>
  </form>
</div>
