<header>
  <div class="user-info">
    <img
      [src]="imageSrc || 'assets/images/nopicture.png'"
      alt="User Photo"
      class="user-photo"
    />
    <div class="user-details">
      <div class="user-name-container">
        <span class="user-name">{{ user.firstName }} {{ user.lastName }}</span>
      </div>
      <span class="user-role">{{ user.jobTitle }}</span>

      <span class="user-email">{{ user.email }}</span>
      <a
        class="edit-link"
        (click)="openEditDialog($event)"
        aria-label="Edit profile"
      >
        <i class="fa-solid fa-edit"></i> Edit
      </a>
    </div>
  </div>
  <button
    class="notification-btn"
    (click)="toggleNotifications()"
    aria-label="Toggle notifications"
  >
    <svg
      class="notification-icon"
      xmlns="http://www.w3.org/2000/svg"
      viewBox="0 0 24 24"
      fill="none"
      stroke="currentColor"
      stroke-width="2"
      stroke-linecap="round"
      stroke-linejoin="round"
    >
      <path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path>
      <path d="M13.73 21a2 2 0 0 1-3.46 0"></path>
    </svg>
    <span class="notification-badge" *ngIf="showBadge"></span>
  </button>
  <div class="notification-dropdown" [ngClass]="{ open: isDropdownOpen }">
    <div class="dropdown-header">
      <span class="dropdown-title">Notifications</span>
      <button class="clear-btn" (click)="clearNotifications()">
        <i class="fa-solid fa-trash-can"></i> Clear All
      </button>
    </div>
    <div class="notification-list">
      <ng-container *ngIf="notifications.length; else noNotifications">
        <div
          class="notification-item"
          [ngClass]="{ unread: notification.unread }"
          *ngFor="let notification of notifications"
          [routerLink]="[notification.url]"
        >
          <i class="notification-icon-fa fa-solid fa-bell"></i>
          <div class="notification-content">
            <p class="notification-message">{{ notification.message }}</p>
            <p class="notification-time">
              {{ notification.time | date : "H:mm" }}
              <span class="notification-date">
                {{ notification.time | date : "d MMM, y" }}
              </span>
            </p>
          </div>
          <span class="unread-dot"></span>
        </div>
      </ng-container>
      <ng-template #noNotifications>
        <p class="no-notifications">No notifications</p>
      </ng-template>
    </div>
    <div class="dropdown-footer">
      <a href="#" class="view-all-link">View All Notifications</a>
    </div>
  </div>
</header>
